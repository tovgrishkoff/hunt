# üìä –°–•–ï–ú–ê –û–ü–†–ï–î–ï–õ–ï–ù–ò–Ø –ù–ò–®–ò –ò –û–¢–°–ï–í–ê –°–ü–ê–ú–ê

## üîÑ –ü–û–õ–ù–´–ô –ü–†–û–¶–ï–°–° –û–ë–†–ê–ë–û–¢–ö–ò –°–û–û–ë–©–ï–ù–ò–Ø

### üì• –í–•–û–î–ù–û–ï –°–û–û–ë–©–ï–ù–ò–ï
```
process_message_from_subscriber()
  ‚Üì
```

---

## üö´ –®–ê–ì 1: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –°–ü–ê–ú (is_critical_spam_only)
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –°–†–ê–ó–£, –¥–æ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫**

### –ß—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è:
1. **–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** - –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –≤—ã–±–æ—Ä–∫–∏, —Ñ–∏–∑—ã
2. **–ù–∞—Ä–∫–æ—Ç–∏–∫–∏** - –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –Ω–∞—Ä–∫–æ—Ç–∏—á–µ—Å–∫–∏—Ö –≤–µ—â–µ—Å—Ç–≤
3. **–ó–≤–µ–∑–¥—ã Telegram** - –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –∑–∞ –∑–≤–µ–∑–¥—ã
4. **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è** - –ø—Ä–æ–≤–µ—Ä–∫–∏, –∫–∞–ø—á–∏, –±–æ—Ç—ã
5. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å–∞/–±–∞–Ω–∫–∏** - –û–û–û, –ò–ü, –ø—Ä–æ–±–∏–≤, –±–∞–Ω–∫–∏
6. **–†–∞–±–æ—Ç–∞ "–ù—É–∂–Ω—ã –±–∞–±–∫–∏"** - –¥–æ—Å—Ç–∞–≤–∫–∞ –∑–∞–∫–∞–∑–æ–≤, –æ–ø—ã—Ç –Ω–µ –Ω—É–∂–µ–Ω, —Å–≤—è–∑—å @
7. **–î–∏–∑–∞–π–Ω–µ—Ä—ã/–º–µ–Ω–µ–¥–∂–µ—Ä—ã** - –ø–æ–∏—Å–∫ –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤, –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤
8. **–†–∞–±–æ—Ç–∞/–ø–æ–¥—Ä–∞–±–æ—Ç–∫–∞** - —Å–∫–ª–∞–¥—ã, –°–î–≠–ö, —É–¥–∞–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞, –ø–µ—Ä—Å–æ–Ω–∞–ª
9. **–ö–∞—Ä—Ç—ã** - –ø—É—à–∫–∏–Ω—Å–∫–∞—è –∫–∞—Ä—Ç–∞, —Å–Ω—è—Ç–∏–µ —Å –∫–∞—Ä—Ç—ã
10. **–ù–î–°/—á–µ–∫–∏** - –±—É–º–∞–∂–Ω—ã–π –ù–î–°, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞–ª–æ–≥–æ–≤
11. **–†–µ–∫–ª–∞–º–∞ –±–æ—Ç–æ–≤/—Ñ–æ—Ä—É–º–æ–≤** - "–í–∞—à –ë–æ—Ç—è", "baliforum.ru", "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –±–∞–ª–∏—Ñ–æ—Ä—É–º–∞"
12. **–ò–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞** - –ø–æ–∏—Å–∫ –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤ –∏–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∏
13. **–ü–ª–∞—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã** - –≤—Ö–æ–¥–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å –æ–ø–ª–∞—Ç–æ–π
14. **–ü–µ—Ä–µ–≤–æ–∑—á–∏–∫–∏** - –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏ –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–æ–≤
15. **–†–∞–±–æ—Ç–∞ –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö** - —Å–æ–±—Ä–∞—Ç—å –º–µ–±–µ–ª—å, –Ω–æ–≤–æ–≥–æ–¥–Ω—è—è –¥–æ—Å—Ç–∞–≤–∫–∞

**–ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ ‚Üí –ë–õ–û–ö–ò–†–û–í–ö–ê, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è**

---

## üîÑ –®–ê–ì 2: –ü–†–û–í–ï–†–ö–ê –ù–ê –î–£–ë–õ–ò–ö–ê–¢–´
**–ü—Ä–æ–≤–µ—Ä–∫–∞, –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏ –ª–∏ –º—ã —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ —Ä–∞–Ω–µ–µ**

```python
_is_duplicate_message(message_text, sender_id)
```

**–ï—Å–ª–∏ –¥—É–±–ª–∏–∫–∞—Ç ‚Üí –ë–õ–û–ö–ò–†–û–í–ö–ê, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è**

---

## üö´ –®–ê–ì 3: –ü–†–û–í–ï–†–ö–ê –ù–ê –ü–û–•–û–ñ–ò–ï –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–ù–´–ï –°–ü–ê–ú-–°–û–û–ë–©–ï–ù–ò–Ø
**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ —Ö–µ—à—É —Å–æ–æ–±—â–µ–Ω–∏—è**

```python
_is_similar_spam_blocked(message_text)
```

**–ï—Å–ª–∏ –ø–æ—Ö–æ–∂–µ –Ω–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∞–º ‚Üí –ë–õ–û–ö–ò–†–û–í–ö–ê, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è**

---

## üîç –®–ê–ì 4: –ì–ò–ë–†–ò–î–ù–ê–Ø –ö–õ–ê–°–°–ò–§–ò–ö–ê–¶–ò–Ø (_hybrid_classify_message)

### 4.1. –†–ê–ù–ù–Ø–Ø –ü–†–û–í–ï–†–ö–ê –ò–ù–§–†–ê–°–¢–†–£–ö–¢–£–†–´ (–ü–ï–†–í–û–ô!)
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ –¢–¶/–º–∞–≥–∞–∑–∏–Ω—ã/–∞–ø—Ç–µ–∫–∏ –ë–ï–ó —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –∂–∏–ª—å—è**

```python
# –ï—Å–ª–∏ –µ—Å—Ç—å: —Ç—Ü, –º–∞–≥–∞–∑–∏–Ω, –∞–ø—Ç–µ–∫–∞, —Ä–µ—Å—Ç–æ—Ä–∞–Ω, –±–∞–Ω–∫, —à–∫–æ–ª–∞...
# –ò –ù–ï–¢: —Å–Ω—è—Ç—å, —Å–¥–∞—Ç—å, –∞—Ä–µ–Ω–¥–∞, –≤–∏–ª–ª–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞
# ‚Üí –ë–õ–û–ö–ò–†–û–í–ö–ê
```

### 4.2. –ü–†–û–í–ï–†–ö–ê –ü–†–ò–í–ï–¢–°–¢–í–ï–ù–ù–´–• –°–û–û–ë–©–ï–ù–ò–ô –ë–û–¢–û–í
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç "–¥–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å" –æ—Ç –±–æ—Ç–æ–≤**

### 4.3. –ü–†–û–í–ï–†–ö–ê –ò–ù–§–û–†–ú–ê–¶–ò–û–ù–ù–´–• –°–û–û–ë–©–ï–ù–ò–ô
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç —Å–ø–∏—Å–∫–∏ –∫–∞–Ω–∞–ª–æ–≤, —Ä–µ–∫–ª–∞–º—É —á–∞—Ç–æ–≤**

### 4.4. –ü–†–û–í–ï–†–ö–ê –°–ü–ï–¶–ò–§–ò–ß–ù–´–• –ó–ê–ü–†–û–°–û–í
- –ü–æ–∏—Å–∫ –ø–æ–≤–∞—Ä–∞/–∫–µ–π—Ç–µ—Ä–∏–Ω–≥–∞ ‚Üí –ù–ï "–°–¥–∞—á–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏"
- –í–æ–ø—Ä–æ—Å—ã –ø—Ä–æ —Ç–∞–±–∞–∫ ‚Üí –ù–ï "–ö–∞–ª—å—è–Ω—ã"
- –¢–æ–≤–∞—Ä—ã (–æ–±—É–≤—å, —Ç–µ–ª–µ—Ñ–æ–Ω, –æ–¥–µ–∂–¥–∞) ‚Üí –ù–ï "–ü—Ä–æ–¥–∞–∂–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏"

### 4.5. –ö–õ–ê–°–°–ò–§–ò–ö–ê–¶–ò–Ø –ü–û –ü–ê–¢–¢–ï–†–ù–ê–ú (–®–ê–ì 2 –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏)

#### –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∏—à:
1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –Ω–∏—à–∏** (–ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏):
   - –û–±–º–µ–Ω –≤–∞–ª—é—Ç
   - –ü—Ä–æ–¥–∞–∂–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
   - –°–¥–∞—á–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏

2. **–û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∏—à–∏** (–≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ)

#### –î–ª—è –∫–∞–∂–¥–æ–π –Ω–∏—à–∏:
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤** –∏–∑ `NICHES_KEYWORDS`
2. **–§–∏–ª—å—Ç—Ä –±–æ–ª—Ç–æ–≤–Ω–∏** (Chatter Filter) - —à—É—Ç–∫–∏, –∏—Å—Ç–æ—Ä–∏–∏, TikTok
3. **–ù–∏—à–µ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã**:
   - **–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å**: —Ä–∞–±–æ—Ç–∞, –∫—Ä–∏–ø—Ç–∞, –æ–¥–µ–∂–¥–∞, –≤–∏–∑—ã, —Ñ–∏–Ω–∞–Ω—Å—ã, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
   - **–í–∏–¥–µ–æ–≥—Ä–∞—Ñ/–§–æ—Ç–æ–≥—Ä–∞—Ñ**: –¥–æ–∫—É–º–µ–Ω—Ç—ã, AI, –ø–æ–¥–∫–∞—Å—Ç—ã
   - **–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç**: —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞, —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã
   - **–¢—É—Ä–∏–∑–º**: –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑ –∂–∏–∑–Ω–∏ (–ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è)

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–º–µ—Ä–µ–Ω–∏–π** (Intent Filter) - –¥–ª—è "–ê—Ä–µ–Ω–¥–∞ –±–∞–π–∫–æ–≤"
   - –¢—Ä–µ–±—É–µ—Ç —è–≤–Ω—ã—Ö —Å–ª–æ–≤: "–∏—â—É", "–∫—É–ø–ª—é", "—Ü–µ–Ω–∞" –∏ —Ç.–¥.

#### –ï—Å–ª–∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –Ω–∞—à–ª–∏ –Ω–∏—à–∏:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- ‚ùå AI –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è (—ç–∫–æ–Ω–æ–º–∏—è)

#### –ï—Å–ª–∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ù–ï –Ω–∞—à–ª–∏ –Ω–∏—à–∏:
- üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ Intent Filter (–µ—Å—Ç—å –ª–∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å)
- ü§ñ –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–∞–º–µ—Ä–µ–Ω–∏–µ ‚Üí –≤—ã–∑—ã–≤–∞–µ–º AI (gpt-4o-mini)
- ‚ùå –ï—Å–ª–∏ –Ω–µ—Ç –Ω–∞–º–µ—Ä–µ–Ω–∏—è ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ–º "–û–ë–©–ï–ù–ò–ï"

---

## üö´ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –°–ü–ê–ú–ê –ü–û–°–õ–ï –ö–õ–ê–°–°–ò–§–ò–ö–ê–¶–ò–ò

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–ø–∞–º-—Ñ—Ä–∞–∑, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ:**

```python
suspicious_patterns = [
    "–æ–ø—ã—Ç –Ω–µ –≤–∞–∂–µ–Ω", "–±–µ–∑ –æ–ø—ã—Ç–∞", "–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –Ω—É–∂–Ω—ã",
    "–≥–∞—Ä–∞–Ω—Ç –≤—Å–µ–≥–¥–∞ –∑–∞", "–º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –æ–ø–ª–∞—Ç–∞", "—Ä–∞–±–æ—Ç–∞ –Ω–∞ –¥–æ–º—É",
    "—É–¥–∞–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞", "—Ñ—Ä–∏–ª–∞–Ω—Å", "–º–ª–º", "–ø–∏—Ä–∞–º–∏–¥–∞",
    "–æ–±—É—á—É –∏ –Ω–∞—É—á—É", "–≤—Å–µ–º—É –æ–±—É—á—É", "–æ–ø–ª–∞—á—É —Å—Ä–∞–∑—É",
    "—Ä–∞–±–æ—Ç–∞ –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö", "—Å–æ–±—Ä–∞—Ç—å –º–µ–±–µ–ª—å", "–Ω–æ–≤–æ–≥–æ–¥–Ω—è—è –¥–æ—Å—Ç–∞–≤–∫–∞",
    "–¥–µ–Ω—å–≥–∏ –≤ –¥–µ–Ω—å —Ä–∞–±–æ—Ç—ã", "–∫–æ–º—É –Ω—É–∂–Ω—ã –¥–µ–Ω—å–≥–∏ —Å–µ–≥–æ–¥–Ω—è",
    "6000 –∑–∞ –ø–∞—Ä—É —á–∞—Å–æ–≤", "–Ω–∞–∫–∏–Ω—É –ø—Ä–æ—Ü–µ–Ω—Ç",
    # ... –∏ –º–Ω–æ–≥–æ –¥—Ä—É–≥–∏—Ö
]
```

**–ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ ‚Üí –ë–õ–û–ö–ò–†–û–í–ö–ê, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è**

---

## üì§ –û–¢–ü–†–ê–í–ö–ê –ü–û–î–ü–ò–°–ß–ò–ö–ê–ú

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∞–º:
- –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—ã–±—Ä–∞–Ω—ã —Å—Ç—Ä–∞–Ω—ã ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
- –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∞ —á–∞—Ç–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞ ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º "–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π"

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –Ω–∏—à–∞–º:
- –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–º, –∫—Ç–æ –ø–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –Ω–∏—à–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏:
- –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è, –ø–æ–º–µ—á–µ–Ω–Ω—ã–µ –∫–∞–∫ –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –°–•–ï–ú–ê

```
–í–•–û–î–ù–û–ï –°–û–û–ë–©–ï–ù–ò–ï
    ‚Üì
–®–ê–ì 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–∞–º ‚Üí –ë–õ–û–ö–ò–†–û–í–ö–ê? ‚Üí ‚ùå –°–¢–û–ü
    ‚Üì
–®–ê–ì 2: –î—É–±–ª–∏–∫–∞—Ç—ã ‚Üí –î–£–ë–õ–ò–ö–ê–¢? ‚Üí ‚ùå –°–¢–û–ü
    ‚Üì
–®–ê–ì 3: –ü–æ—Ö–æ–∂–∏–π —Å–ø–∞–º ‚Üí –ü–û–•–û–ñ? ‚Üí ‚ùå –°–¢–û–ü
    ‚Üì
–®–ê–ì 4: –ì–∏–±—Ä–∏–¥–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
    ‚îú‚îÄ –†–∞–Ω–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã ‚Üí –ë–õ–û–ö–ò–†–û–í–ö–ê? ‚Üí ‚ùå –°–¢–û–ü
    ‚îú‚îÄ –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –±–æ—Ç–æ–≤ ‚Üí –ë–õ–û–ö–ò–†–û–í–ö–ê? ‚Üí ‚ùå –°–¢–û–ü
    ‚îú‚îÄ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è ‚Üí –ë–õ–û–ö–ò–†–û–í–ö–ê? ‚Üí ‚ùå –°–¢–û–ü
    ‚îú‚îÄ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º
    ‚îÇ   ‚îú‚îÄ –ù–∞–π–¥–µ–Ω—ã –Ω–∏—à–∏ ‚Üí ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–ú –ü–ê–¢–¢–ï–†–ù–´
    ‚îÇ   ‚îî‚îÄ –ù–µ –Ω–∞–π–¥–µ–Ω—ã ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ Intent ‚Üí AI (–µ—Å–ª–∏ –µ—Å—Ç—å –Ω–∞–º–µ—Ä–µ–Ω–∏–µ)
    ‚îî‚îÄ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∞–º–∞ ‚Üí –ë–õ–û–ö–ò–†–û–í–ö–ê? ‚Üí ‚ùå –°–¢–û–ü
    ‚Üì
–û–¢–ü–†–ê–í–ö–ê –ü–û–î–ü–ò–°–ß–ò–ö–ê–ú
    ‚îú‚îÄ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∞–º
    ‚îú‚îÄ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –Ω–∏—à–∞–º
    ‚îî‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
```

---

## üîë –ö–õ–Æ–ß–ï–í–´–ï –§–ò–õ–¨–¢–†–´

### 1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–∞–º (–®–ê–ì 1)
- **–ú–µ—Å—Ç–æ**: `is_critical_spam_only()`
- **–ö–æ–≥–¥–∞**: –°—Ä–∞–∑—É –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- **–ß—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç**: –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –Ω–∞—Ä–∫–æ—Ç–∏–∫–∏, —Ä–∞–±–æ—Ç–∞, –±–æ—Ç—ã, –ù–î–°/—á–µ–∫–∏

### 2. –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∞–º–∞
- **–ú–µ—Å—Ç–æ**: `is_spam_message()`
- **–ö–æ–≥–¥–∞**: –í `handle_source_message()` (—Å—Ç–∞—Ä—ã–π –ø—É—Ç—å)
- **–ß—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç**: –ë–æ—Ç—ã –ø–æ username, –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### 3. –†–∞–Ω–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **–ú–µ—Å—Ç–æ**: –í –Ω–∞—á–∞–ª–µ `_hybrid_classify_message()`
- **–ö–æ–≥–¥–∞**: –ü–µ—Ä–µ–¥ –≤—Å–µ–º–∏ –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –≤ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **–ß—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç**: –¢–¶, –º–∞–≥–∞–∑–∏–Ω—ã, –∞–ø—Ç–µ–∫–∏ –±–µ–∑ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –∂–∏–ª—å—è

### 4. –§–∏–ª—å—Ç—Ä –±–æ–ª—Ç–æ–≤–Ω–∏ (Chatter Filter)
- **–ú–µ—Å—Ç–æ**: –í —Ü–∏–∫–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- **–ö–æ–≥–¥–∞**: –ï—Å–ª–∏ –ø–∞—Ç—Ç–µ—Ä–Ω –Ω–∞–π–¥–µ–Ω –¥–ª—è –Ω–∏—à–∏
- **–ß—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç**: –®—É—Ç–∫–∏, –∏—Å—Ç–æ—Ä–∏–∏, TikTok, YouTube Shorts

### 5. –ù–∏—à–µ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
- **–ú–µ—Å—Ç–æ**: –í —Ü–∏–∫–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- **–ö–æ–≥–¥–∞**: –ï—Å–ª–∏ –ø–∞—Ç—Ç–µ—Ä–Ω –Ω–∞–π–¥–µ–Ω –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –Ω–∏—à–∏
- **–ß—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç**: –õ–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è (—Ä–∞–±–æ—Ç–∞ –≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏, –ø–æ–¥–∫–∞—Å—Ç—ã –≤ –≤–∏–¥–µ–æ–≥—Ä–∞—Ñ–µ –∏ —Ç.–¥.)

### 6. Intent Filter
- **–ú–µ—Å—Ç–æ**: –ü–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º AI
- **–ö–æ–≥–¥–∞**: –ï—Å–ª–∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –Ω–µ –Ω–∞—à–ª–∏ –Ω–∏—à–∏
- **–ß—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç**: –û–±—ã—á–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ –±–µ–∑ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ –Ω–∞–º–µ—Ä–µ–Ω–∏—è

---

## üí∞ –≠–ö–û–ù–û–ú–ò–Ø API

1. **–ü–∞—Ç—Ç–µ—Ä–Ω—ã –Ω–∞—à–ª–∏ –Ω–∏—à–∏** ‚Üí AI –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
2. **–ù–µ—Ç –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ –Ω–∞–º–µ—Ä–µ–Ω–∏—è** ‚Üí AI –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
3. **–°–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ/–¥–ª–∏–Ω–Ω–æ–µ** ‚Üí AI –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
4. **AI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏**:
   - –ü–∞—Ç—Ç–µ—Ä–Ω—ã –Ω–µ –Ω–∞—à–ª–∏ –Ω–∏—à–∏
   - –ï—Å—Ç—å –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–µ
   - –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–π –¥–ª–∏–Ω—ã

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢ –ö–õ–ê–°–°–ò–§–ò–ö–ê–¶–ò–ò

```python
{
    "message_type": "–ü–û–ò–°–ö|–ü–†–ï–î–õ–û–ñ–ï–ù–ò–ï|–û–ë–©–ï–ù–ò–ï",
    "is_spam": True/False,
    "niches": ["–ù–∏—à–∞1", "–ù–∏—à–∞2"],
    "context": "–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞",
    "urgency": "—Å—Ä–æ—á–Ω–æ|–Ω–µ —Å—Ä–æ—á–Ω–æ",
    "budget": "–ë—é–¥–∂–µ—Ç",
    "confidence": 0-100,
    "reason": "–ü—Ä–∏—á–∏–Ω–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏"
}
```











