# üîÑ –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ Lexus/Ukraine

## üìä –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

–£ –≤–∞—Å –∑–∞–ø—É—â–µ–Ω—ã **—Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–æ —Å—Ç–∞—Ä–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π (JSON —Ñ–∞–π–ª—ã, –æ—Ç–¥–µ–ª—å–Ω—ã–µ docker-compose —Ñ–∞–π–ª—ã).

**–ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞:**
- ‚úÖ PostgreSQL + lexus_db –º–æ–¥—É–ª–∏
- ‚úÖ Scout (scout.py)
- ‚úÖ Smart Joiner (smart_joiner.py)
- ‚úÖ Marketer (poster.py)
- ‚úÖ Docker Compose template (multi-project)
- ‚úÖ Cron –∑–∞–¥–∞—á–∏

## üéØ –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å Lexus/Ukraine
docker ps | grep -E "lexus|ukraine|telegram-combine"

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ä—ã–µ docker-compose —Ñ–∞–π–ª—ã
ls -la docker-compose*.yml
```

### –®–∞–≥ 2: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è Lexus (–µ—Å–ª–∏ –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π docker-compose)
docker-compose -f docker-compose.lexus.yml down  # –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
docker-compose -f docker-compose.auto-join-ukraine.yml down  # –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤—Ä—É—á–Ω—É—é
docker stop lexus-secretary lexus-scheduler auto-join-ukraine-cars 2>/dev/null
docker stop telegram-combine-postgres telegram-combine-account-manager telegram-combine-marketer telegram-combine-secretary telegram-combine-activity 2>/dev/null

# –£–¥–∞–ª–∏—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
docker rm lexus-secretary lexus-scheduler auto-join-ukraine-cars 2>/dev/null
docker rm telegram-combine-postgres telegram-combine-account-manager telegram-combine-marketer telegram-combine-secretary telegram-combine-activity 2>/dev/null
```

### –®–∞–≥ 3: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å)

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON —Ñ–∞–π–ª–æ–≤ –≤ –Ω–æ–≤—É—é –ë–î
# (–ï—Å–ª–∏ –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–Ω–æ)
docker exec -it ukraine-postgres psql -U telegram_user_ukraine -d ukraine_db
# –ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ Python —Å–∫—Ä–∏–ø—Ç
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ Ukraine/Lexus
./run-ukraine.sh up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
./run-ukraine.sh ps

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
./run-ukraine.sh logs -f
```

### –®–∞–≥ 5: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Cron –∑–∞–¥–∞—á–∏

```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
./install-cron.sh

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
crontab crontab.ukraine
# –∏–ª–∏
crontab crontab.combined  # –¥–ª—è –æ–±–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
```

## ‚úÖ –°—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ Lexus/Ukraine

### –ü–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ ‚úÖ

1. ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**
   - PostgreSQL —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ (accounts, targets, post_history)
   - –ú–æ–¥—É–ª–∏ lexus_db (models.py, db_manager.py, session.py)
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ async SQLAlchemy

2. ‚úÖ **Scout (–ü–∞—Ä—Å–µ—Ä)**
   - `services/account-manager/scout.py`
   - –ù–∞—Ö–æ–¥–∏—Ç –Ω–æ–≤—ã–µ –≥—Ä—É–ø–ø—ã
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 'new'

3. ‚úÖ **Smart Joiner (–í—Å—Ç—É–ø–∞—Ç–æ—Ä)**
   - `services/account-manager/smart_joiner.py`
   - –í—Å—Ç—É–ø–∞–µ—Ç –≤ –≥—Ä—É–ø–ø—ã
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç FloodWait
   - –°—Ç—Ä–æ–≥–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ –∫ –≥—Ä—É–ø–ø–µ
   - Warm-up –ø–µ—Ä–∏–æ–¥ (24 —á–∞—Å–∞)

4. ‚úÖ **Marketer (–ü–æ—Å—Ç–µ—Ä)**
   - `services/marketer/poster.py`
   - –ü–æ—Å—Ç–∏—Ç –≤ –≥—Ä—É–ø–ø—ã
   - –õ–∏–º–∏—Ç—ã (2 –ø–æ—Å—Ç–∞/–≥—Ä—É–ø–ø—É, 20 –ø–æ—Å—Ç–æ–≤/–∞–∫–∫–∞—É–Ω—Ç)
   - –ó–∞–ø–∏—Å—å –≤ post_history

5. ‚úÖ **Docker Compose**
   - `docker-compose.template.yml` (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω)
   - `run-ukraine.sh` (helper —Å–∫—Ä–∏–ø—Ç)
   - –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (data/ukraine/)

6. ‚úÖ **Cron –∑–∞–¥–∞—á–∏**
   - `crontab.ukraine`
   - `crontab.combined`
   - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è Scout, Joiner, Marketer

### –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚ö†Ô∏è

1. ‚ö†Ô∏è **Secretary (–ê–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫)**
   - –°—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: `lexus-secretary`
   - –í–æ–ø—Ä–æ—Å: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–∏ –æ–Ω –Ω–æ–≤—É—é –ë–î (`lexus_db`)?
   - –ù—É–∂–Ω–æ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –Ω–æ–≤–æ–π –ë–î

2. ‚ö†Ô∏è **Activity (–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)**
   - –í–æ–ø—Ä–æ—Å: –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å?
   - –ù—É–∂–Ω–æ: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –Ω—É–∂–Ω–∞ –ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–æ–≤–æ–π –ë–î

3. ‚ö†Ô∏è **–°—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**
   - `lexus-scheduler` - –ù—É–∂–µ–Ω –ª–∏? –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ Cron?
   - `auto-join-ukraine-cars` - –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ smart_joiner?
   - `telegram-combine-*` - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å?

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è Lexus/Ukraine**
2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** —á–µ—Ä–µ–∑ `./run-ukraine.sh up -d`
3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Cron –∑–∞–¥–∞—á–∏** —á–µ—Ä–µ–∑ `./install-cron.sh`
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É** —á–µ—Ä–µ–∑ –ª–æ–≥–∏

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å–æ —Å—Ç–∞—Ä–æ–π
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É** –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
3. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—É—é** —Å–∏—Å—Ç–µ–º—É –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

## üìã –ß–µ–∫-–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

- [ ] –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (`lexus-*`, `auto-join-ukraine-cars`, `telegram-combine-*`)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å/—Å–æ–∑–¥–∞—Ç—å `.env.ukraine` —Ñ–∞–π–ª
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ `data/ukraine/`
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É: `./run-ukraine.sh up -d`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤: `./run-ukraine.sh ps`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `./run-ukraine.sh logs -f`
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Cron –∑–∞–¥–∞—á–∏: `./install-cron.sh`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Scout: `docker exec ukraine-account-manager python3 /app/services/account-manager/scout.py ukraine_cars`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Joiner: `docker exec ukraine-account-manager python3 /app/services/account-manager/smart_joiner.py ukraine_cars 2`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Marketer: `docker exec ukraine-marketer python3 /app/services/marketer/poster.py ukraine_cars 2`

## üí° –ò—Ç–æ–≥

**–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ Lexus/Ukraine –ì–û–¢–û–í–ê:**

- ‚úÖ Scout ‚Üí –ù–∞—Ö–æ–¥–∏—Ç –≥—Ä—É–ø–ø—ã
- ‚úÖ Smart Joiner ‚Üí –í—Å—Ç—É–ø–∞–µ—Ç –≤ –≥—Ä—É–ø–ø—ã  
- ‚úÖ Marketer ‚Üí –ü–æ—Å—Ç–∏—Ç –≤ –≥—Ä—É–ø–ø—ã
- ‚úÖ Cron ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

**–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!** üöÄ

**Secretary –∏ Activity** –º–æ–∂–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑–∂–µ, –µ—Å–ª–∏ –æ–Ω–∏ –µ—â–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–æ —Å—Ç–∞—Ä–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.
