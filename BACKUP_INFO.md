# üíæ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±—ç–∫–∞–ø–∞—Ö –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–±—ç–∫–∞–ø–∞

- **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ**: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 03:00 (–ø–æ —Å–µ—Ä–≤–µ—Ä–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏)
- **–°–∫—Ä–∏–ø—Ç**: `/home/tovgrishkoff/mvp2105/backup_db.sh`
- **–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è**: `/home/tovgrishkoff/mvp2105/backups/`
- **–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤**: `bali_bot_backup_YYYYMMDD_HHMMSS.sql.gz`
- **–°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è**: 30 –¥–Ω–µ–π (—Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ cron

```bash
crontab -l | grep backup
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
0 3 * * * /home/tovgrishkoff/mvp2105/backup_db.sh >> /home/tovgrishkoff/mvp2105/backups/backup.log 2>&1
```

---

## üõ†Ô∏è –†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞

### –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç

```bash
/home/tovgrishkoff/mvp2105/backup_db.sh
```

### –ù–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ Docker

```bash
# –ë—ç–∫–∞–ø –≤ —Ñ–∞–π–ª
docker exec bali-postgres pg_dump -U grishkoff bali_bot > backup_$(date +%Y%m%d).sql

# –ë—ç–∫–∞–ø —Å–æ —Å–∂–∞—Ç–∏–µ–º
docker exec bali-postgres pg_dump -U grishkoff bali_bot | gzip > backup_$(date +%Y%m%d).sql.gz
```

---

## üìÇ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –±—ç–∫–∞–ø–æ–≤

### –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±—ç–∫–∞–ø–æ–≤

```bash
ls -lh /home/tovgrishkoff/mvp2105/backups/*.sql.gz
```

### –ü–æ—Å–ª–µ–¥–Ω–∏–µ 5 –±—ç–∫–∞–ø–æ–≤

```bash
ls -lht /home/tovgrishkoff/mvp2105/backups/*.sql.gz | head -5
```

### –†–∞–∑–º–µ—Ä –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –±—ç–∫–∞–ø–∞–º–∏

```bash
du -sh /home/tovgrishkoff/mvp2105/backups/
```

---

## üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞

### ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï
–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞ **–ü–û–õ–ù–û–°–¢–¨–Æ –ü–ï–†–ï–ó–ê–ü–ò–®–ï–¢** —Ç–µ–∫—É—â—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö!

### –®–∞–≥ 1: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞

```bash
docker stop bali-bot bali-user-monitor bali-reminders
```

### –®–∞–≥ 2: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ

```bash
# –£–∫–∞–∂–∏—Ç–µ –Ω—É–∂–Ω—ã–π —Ñ–∞–π–ª –±—ç–∫–∞–ø–∞
BACKUP_FILE="/home/tovgrishkoff/mvp2105/backups/bali_bot_backup_20251022_030001.sql.gz"

# –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
gunzip -c $BACKUP_FILE | docker exec -i bali-postgres psql -U grishkoff -d bali_bot
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞

```bash
docker start bali-bot bali-user-monitor bali-reminders
```

---

## üìã –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –±—ç–∫–∞–ø–∞

```bash
tail -f /home/tovgrishkoff/mvp2105/backups/backup.log
```

–ò–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫:
```bash
tail -50 /home/tovgrishkoff/mvp2105/backups/backup.log
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Å–∂–∞—Ç–æ–≥–æ —Ñ–∞–π–ª–∞

```bash
gunzip -t /home/tovgrishkoff/mvp2105/backups/bali_bot_backup_*.sql.gz
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –±—ç–∫–∞–ø–∞ (–ø–µ—Ä–≤—ã–µ 20 —Å—Ç—Ä–æ–∫)

```bash
gunzip -c /home/tovgrishkoff/mvp2105/backups/bali_bot_backup_*.sql.gz | head -20
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –±—ç–∫–∞–ø–∞

–ï—Å–ª–∏ –±—ç–∫–∞–ø –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:

### –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É –≤ cron

```bash
# –û—Ç–∫—Ä—ã—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä cron
crontab -e

# –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 03:00):
0 3 * * * /home/tovgrishkoff/mvp2105/backup_db.sh >> /home/tovgrishkoff/mvp2105/backups/backup.log 2>&1
```

### –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º

```bash
chmod +x /home/tovgrishkoff/mvp2105/backup_db.sh
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–∫—Ä–∏–ø—Ç–∞

```bash
/home/tovgrishkoff/mvp2105/backup_db.sh
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—ç–∫–∞–ø–æ–≤

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—ç–∫–∞–ø–æ–≤

```bash
ls /home/tovgrishkoff/mvp2105/backups/*.sql.gz | wc -l
```

### –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –≤—Å–µ—Ö –±—ç–∫–∞–ø–æ–≤

```bash
du -ch /home/tovgrishkoff/mvp2105/backups/*.sql.gz | grep total
```

### –°–∞–º—ã–π —Å—Ç–∞—Ä—ã–π –∏ –Ω–æ–≤—ã–π –±—ç–∫–∞–ø

```bash
echo "–°–∞–º—ã–π —Å—Ç–∞—Ä—ã–π:"
ls -lt /home/tovgrishkoff/mvp2105/backups/*.sql.gz | tail -1

echo "–°–∞–º—ã–π –Ω–æ–≤—ã–π:"
ls -lt /home/tovgrishkoff/mvp2105/backups/*.sql.gz | head -1
```

---

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –°–∫—Ä–∏–ø—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
ls -l /home/tovgrishkoff/mvp2105/backup_db.sh

# –ï—Å–ª–∏ —Ñ–∞–π–ª–∞ –Ω–µ—Ç, —Å–æ–∑–¥–∞—Ç—å –∑–∞–Ω–æ–≤–æ –∏–∑ README
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

```bash
chmod +x /home/tovgrishkoff/mvp2105/backup_db.sh
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker ps | grep postgres

# –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ-–¥—Ä—É–≥–æ–º—É, –∏–∑–º–µ–Ω–∏—Ç—å –≤ —Å–∫—Ä–∏–ø—Ç–µ backup_db.sh
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ
df -h

# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã –≤—Ä—É—á–Ω—É—é
rm /home/tovgrishkoff/mvp2105/backups/bali_bot_backup_2025*.sql.gz

# –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ —Å–∫—Ä–∏–ø—Ç–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30 –¥–Ω–µ–π)
```

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏** –±—ç–∫–∞–ø–æ–≤ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
2. **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** –∏–∑ –±—ç–∫–∞–ø–∞ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥–µ
3. **–•—Ä–∞–Ω–∏—Ç–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –±—ç–∫–∞–ø—ã** –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –Ω–∞ –¥—Ä—É–≥–æ–º —Å–µ—Ä–≤–µ—Ä–µ –∏–ª–∏ –≤ –æ–±–ª–∞–∫–µ
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä** –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –±—ç–∫–∞–ø–∞–º–∏
5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –±—ç–∫–∞–ø–∞ (–º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç)

---

## üì• –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä

```bash
# –° –ø–æ–º–æ—â—å—é scp
scp user@server:/home/tovgrishkoff/mvp2105/backups/bali_bot_backup_*.sql.gz ./

# –ò–ª–∏ rsync
rsync -avz user@server:/home/tovgrishkoff/mvp2105/backups/ ./local_backups/
```

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –±—ç–∫–∞–ø–æ–≤

–ü–æ—Å–ª–µ–¥–Ω–∏–µ —É—Å–ø–µ—à–Ω—ã–µ –±—ç–∫–∞–ø—ã:
- ‚úÖ 22 –æ–∫—Ç—è–±—Ä—è 2025, 03:00 - 2.2 KB (—Å–∂–∞—Ç—ã–π)
- ‚úÖ 21 –æ–∫—Ç—è–±—Ä—è 2025, 03:00 - 2.2 KB (—Å–∂–∞—Ç—ã–π)
- ‚úÖ 21 –æ–∫—Ç—è–±—Ä—è 2025, 02:34 - 2.2 KB (—Å–∂–∞—Ç—ã–π)

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –° 23 –æ–∫—Ç—è–±—Ä—è –±—ç–∫–∞–ø—ã –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è (—Å–∫—Ä–∏–ø—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω)
**–†–µ—à–µ–Ω–∏–µ**: –°–∫—Ä–∏–ø—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É
















