# üìä –õ–∏–º–∏—Ç—ã –ø–æ—Å—Ç–∏–Ω–≥–∞ - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## ‚úÖ –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (—É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!)

–õ–∏–º–∏—Ç—ã –ø–æ—Å—Ç–∏–Ω–≥–∞ **—É–∂–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã** –≤ —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º–µ —á–µ—Ä–µ–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º —Å—á–µ—Ç—á–∏–∫–æ–≤.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ SQL**
   
   –ú–µ—Ç–æ–¥ `DbManager.get_groups_ready_for_posting()` —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –≥—Ä—É–ø–ø—ã **–¥–æ** –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ Python:
   
   ```python
   # –í db_manager.py (—Å—Ç—Ä–æ–∫–∞ 163-165)
   Target.daily_posts_in_group < 2,  # –õ–∏–º–∏—Ç –≥—Ä—É–ø–ø—ã –Ω–µ –∏—Å—á–µ—Ä–ø–∞–Ω
   Account.daily_posts_count < 20,   # –õ–∏–º–∏—Ç –∞–∫–∫–∞—É–Ω—Ç–∞ –Ω–µ –∏—Å—á–µ—Ä–ø–∞–Ω
   ```
   
   –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ `poster.py` **–ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ –≥—Ä—É–ø–ø—ã, –≥–¥–µ –ª–∏–º–∏—Ç—ã –ù–ï –ø—Ä–µ–≤—ã—à–µ–Ω—ã**.

2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤**
   
   –ú–µ—Ç–æ–¥ `DbManager.record_post()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—á–µ—Ç—á–∏–∫–∏:
   
   ```python
   # –í db_manager.py (—Å—Ç—Ä–æ–∫–∞ 243-249)
   if status == 'success':
       account.daily_posts_count += 1
       target.daily_posts_in_group += 1
       target.last_post_at = now
   ```

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –≤ –ø–æ–ª–Ω–æ—á—å**
   
   –ú–µ—Ç–æ–¥ `reset_daily_counters_if_needed()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –≤—ã–±–æ—Ä–∫–æ–π –≥—Ä—É–ø–ø –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫–∏, –µ—Å–ª–∏ –Ω–∞—Å—Ç—É–ø–∏–ª –Ω–æ–≤—ã–π –¥–µ–Ω—å.

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

‚úÖ **–ë—ã—Å—Ç—Ä–æ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ SQL, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç COUNT –∑–∞–ø—Ä–æ—Å–æ–≤  
‚úÖ **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ**: –°—á–µ—Ç—á–∏–∫–∏ –≤ —Å–∞–º–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö, –Ω–µ—Ç –¥–∂–æ–π–Ω–æ–≤ –∫ `post_history`  
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–æ–≤ –≤ –ø–æ–ª–Ω–æ—á—å  
‚úÖ **–ü–æ–ª–Ω–æ**: –ó–∞–ø–∏—Å—å –≤ `post_history` –¥–ª—è –∞—É–¥–∏—Ç–∞  

## ‚ö†Ô∏è –ü–æ—á–µ–º—É –Ω–µ –Ω—É–∂–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ poster.py?

–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Å `COUNT(*) FROM post_history` **–∏–∑–±—ã—Ç–æ—á–µ–Ω**, –ø–æ—Ç–æ–º—É —á—Ç–æ:

1. –õ–∏–º–∏—Ç—ã —É–∂–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤ `get_groups_ready_for_posting()`
2. COUNT –∑–∞–ø—Ä–æ—Å –¥–ª—è –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã –±—É–¥–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–µ–µ
3. –î—É–±–ª–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É, –∫–æ—Ç–æ—Ä–∞—è —É–∂–µ –µ—Å—Ç—å –≤ SQL

## üìã –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

```
poster.py
  ‚Üì
get_groups_ready_for_posting()
  ‚Üì
SQL: WHERE daily_posts_in_group < 2 AND daily_posts_count < 20
  ‚Üì
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≥—Ä—É–ø–ø—ã —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –ª–∏–º–∏—Ç–∞–º–∏
  ‚Üì
poster.py –ø–æ—Å—Ç–∏—Ç –≤ —ç—Ç–∏ –≥—Ä—É–ø–ø—ã
  ‚Üì
record_post() –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—á–µ—Ç—á–∏–∫–∏
```

## ‚úÖ –í—ã–≤–æ–¥

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!**

–õ–∏–º–∏—Ç—ã:
- ‚úÖ 2 –ø–æ—Å—Ç–∞ –≤ –¥–µ–Ω—å –Ω–∞ –≥—Ä—É–ø–ø—É (`daily_posts_in_group < 2`)
- ‚úÖ 20 –ø–æ—Å—Ç–æ–≤ –≤ –¥–µ–Ω—å –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç (`daily_posts_count < 20`)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –≤ –ø–æ–ª–Ω–æ—á—å
- ‚úÖ –ó–∞–ø–∏—Å—å –≤ `post_history` –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è! üéâ
