# ‚úÖ –†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –ø–æ—Å—Ç–∏–Ω–≥ - –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢

**–î–∞—Ç–∞:** 2026-01-13  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢**

---

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø–æ—Å—Ç–∏—Ç **—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –≥—Ä—É–ø–ø—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏–∑ `group_niches.json`.

---

## ‚úÖ –°—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏:

- ‚úÖ **group_niches.json:** –ó–∞–≥—Ä—É–∂–µ–Ω–æ **826** –º–∞–ø–ø–∏–Ω–≥–æ–≤ –≥—Ä—É–ø–ø –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- ‚úÖ **messages.json:** –ó–∞–≥—Ä—É–∂–µ–Ω–æ **650** —Å–æ–æ–±—â–µ–Ω–∏–π, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ **30** –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- ‚úÖ **–†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –≤—ã–±–æ—Ä:** –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≥—Ä—É–ø–ø—ã

---

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### 1. –ú–∞–ø–ø–∏–Ω–≥ –≥—Ä—É–ø–ø –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

–§–∞–π–ª `group_niches.json` —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞–ø–ø–∏–Ω–≥ –≥—Ä—É–ø–ø –∫ –ø–æ–¥-–Ω–∏—à–∞–º:
```json
{
  "@bali_yes": "car_rental",
  "@balimotocats": "currency",
  "@pvbali": "designer",
  "@scooters_bali": "bike_rental",
  "@bali_rents": "rental_property",
  ...
}
```

**–í—Å–µ–≥–æ:** 826 –≥—Ä—É–ø–ø —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏

### 2. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

–°–æ–æ–±—â–µ–Ω–∏—è –∏–∑ `config/messages/bali/messages.json` –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª—è `source_file`:
- `messages_bike_rental.txt` ‚Üí –∫–∞—Ç–µ–≥–æ—Ä–∏—è `bike_rental` (15 —Å–æ–æ–±—â–µ–Ω–∏–π)
- `messages_car_rental.txt` ‚Üí –∫–∞—Ç–µ–≥–æ—Ä–∏—è `car_rental` (15 —Å–æ–æ–±—â–µ–Ω–∏–π)
- `messages_photographer.txt` ‚Üí –∫–∞—Ç–µ–≥–æ—Ä–∏—è `photographer` (15 —Å–æ–æ–±—â–µ–Ω–∏–π)
- –∏ —Ç.–¥.

**–í—Å–µ–≥–æ:** 30 –∫–∞—Ç–µ–≥–æ—Ä–∏–π, 650 —Å–æ–æ–±—â–µ–Ω–∏–π

### 3. –†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –≤—ã–±–æ—Ä

–ü—Ä–∏ –ø–æ—Å—Ç–∏–Ω–≥–µ –≤ –≥—Ä—É–ø–ø—É:
1. ‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é –≥—Ä—É–ø–ø—ã –∏–∑ `group_niches.json`
2. ‚úÖ –í—ã–±–∏—Ä–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
3. ‚úÖ –ï—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è (fallback)

---

## üìã –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã:

### –ì—Ä—É–ø–ø–∞ `@bali_yes` (car_rental):
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ `car_rental` (15 —Å–æ–æ–±—â–µ–Ω–∏–π)
- –ü—Ä–∏–º–µ—Ä: "–ò—â—É –∞–≤—Ç–æ –≤ –∞—Ä–µ–Ω–¥—É –Ω–∞ –ë–∞–ª–∏, –Ω—É–∂–Ω–∞ –º–∞—à–∏–Ω–∞ –¥–ª—è –ø–æ–µ–∑–¥–æ–∫"

### –ì—Ä—É–ø–ø–∞ `@balimotocats` (currency):
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ `currency` (15 —Å–æ–æ–±—â–µ–Ω–∏–π)
- –ü—Ä–∏–º–µ—Ä: "–ò—â—É –æ–±–º–µ–Ω–Ω–∏–∫ –≤–∞–ª—é—Ç—ã –Ω–∞ –ë–∞–ª–∏, –Ω—É–∂–µ–Ω –≤—ã–≥–æ–¥–Ω—ã–π –∫—É—Ä—Å"

### –ì—Ä—É–ø–ø–∞ `@pvbali` (designer):
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ `designer` (15 —Å–æ–æ–±—â–µ–Ω–∏–π)
- –ü—Ä–∏–º–µ—Ä: "–ò—â—É –¥–∏–∑–∞–π–Ω–µ—Ä–∞ –∏–Ω—Ç–µ—Ä—å–µ—Ä–æ–≤ –Ω–∞ –ë–∞–ª–∏, –Ω—É–∂–µ–Ω –¥–∏–∑–∞–π–Ω –≤–∏–ª–ª—ã"

### –ì—Ä—É–ø–ø–∞ `@scooters_bali` (bike_rental):
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ `bike_rental` (15 —Å–æ–æ–±—â–µ–Ω–∏–π)
- –ü—Ä–∏–º–µ—Ä: "–ò—â—É –±–∞–π–∫ –≤ –∞—Ä–µ–Ω–¥—É –Ω–∞ –ë–∞–ª–∏, –Ω—É–∂–µ–Ω –º–æ—Ç–æ—Ü–∏–∫–ª –¥–ª—è –ø–æ–µ–∑–¥–æ–∫"

### –ì—Ä—É–ø–ø–∞ `@bali_rents` (rental_property):
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ `rental_property` (15 —Å–æ–æ–±—â–µ–Ω–∏–π)
- –ü—Ä–∏–º–µ—Ä: "–ò—â—É –≤–∏–ª–ª—É –≤ –∞—Ä–µ–Ω–¥—É –Ω–∞ –ë–∞–ª–∏, –Ω—É–∂–Ω–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å –¥–ª—è –æ—Ç–¥—ã—Ö–∞"

### –ì—Ä—É–ø–ø–∞ –±–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (general):
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –≠—Ç–æ –≥—Ä—É–ø–ø—ã –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

---

## üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:

### `services/marketer/poster.py`:

1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_load_group_niches()` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –º–∞–ø–ø–∏–Ω–≥ –≥—Ä—É–ø–ø –∫ –ø–æ–¥-–Ω–∏—à–∞–º
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_load_messages_by_category()` - –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_get_relevant_messages()` - –≤—ã–±–∏—Ä–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –≥—Ä—É–ø–ø—ã
4. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_load_posts()` - –¥–ª—è –Ω–∏—à–∏ 'bali' –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑ `messages.json`
5. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `_get_relevant_messages()` –≤–º–µ—Å—Ç–æ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞

### `docker-compose.yml`:

1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω volume –¥–ª—è `group_niches.json` –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `marketer`:
   ```yaml
   - ./group_niches.json:/app/group_niches.json:ro
   ```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:

**–í—Å–µ–≥–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:** 30  
**–í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π:** 650

**–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:**
- –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å (morning, noon, evening, housing, rental_property, sale_property): ~170 —Å–æ–æ–±—â–µ–Ω–∏–π
- –§–æ—Ç–æ/–í–∏–¥–µ–æ (photo, photographer, video, videographer): ~100 —Å–æ–æ–±—â–µ–Ω–∏–π
- –ö—Ä–∞—Å–æ—Ç–∞ (eyebrows, eyelashes, hair, makeup, manicure, cosmetology): ~90 —Å–æ–æ–±—â–µ–Ω–∏–π
- –£—Å–ª—É–≥–∏ (designer, transport, tourism, psychological, seamstress, media_studio): ~90 —Å–æ–æ–±—â–µ–Ω–∏–π
- –ê—Ä–µ–Ω–¥–∞ (bike_rental, car_rental): ~30 —Å–æ–æ–±—â–µ–Ω–∏–π
- –†–∞–∑–Ω–æ–µ (currency, hookah, playstation, energy_cleansing, family_retreat, general): ~90 —Å–æ–æ–±—â–µ–Ω–∏–π

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:

- ‚úÖ **–°–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å—Ç–∏—Ç—Å—è –≤ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –≥—Ä—É–ø–ø—ã**
- ‚úÖ **–ì—Ä—É–ø–ø—ã –ø–æ–ª—É—á–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ —Ç–µ–º–∞—Ç–∏–∫–µ**
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏**
- ‚úÖ **Fallback –Ω–∞ –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –µ—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞**
- ‚úÖ **826 –≥—Ä—É–ø–ø —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–æ**
- ‚úÖ **650 —Å–æ–æ–±—â–µ–Ω–∏–π —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–æ –ø–æ 30 –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º**

---

## üîÑ –°—Ç–∞—Ç—É—Å:

- ‚úÖ –ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω
- ‚úÖ Docker-compose –æ–±–Ω–æ–≤–ª–µ–Ω
- ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –º–∞–ø–ø–∏–Ω–≥ –≥—Ä—É–ø–ø (826 –≥—Ä—É–ø–ø)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (30 –∫–∞—Ç–µ–≥–æ—Ä–∏–π, 650 —Å–æ–æ–±—â–µ–Ω–∏–π)
- ‚úÖ **–ì–û–¢–û–í–û –ö –†–ê–ë–û–¢–ï!**

---

## üìù –õ–æ–≥–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç:

```
‚úÖ Loaded 826 group niches from /app/group_niches.json
‚úÖ Loaded messages by category: 30 categories, 650 total messages
```

---

*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 2026-01-13*
