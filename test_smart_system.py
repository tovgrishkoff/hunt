#!/usr/bin/env python3
"""
–¢–µ—Å—Ç —É–º–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –æ—Ç–≤–µ—Ç–æ–≤
"""

from smart_response_analyzer import SmartResponseAnalyzer

def test_smart_system():
    """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–º–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö"""
    
    analyzer = SmartResponseAnalyzer()
    
    print("üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –£–ú–ù–û–ô –°–ò–°–¢–ï–ú–´ –û–¢–í–ï–¢–û–í")
    print("=" * 70)
    
    # –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
    test_cases = [
        {
            "name": "–§–æ—Ç–æ–≥—Ä–∞—Ñ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —É—Å–ª—É–≥–∏",
            "message": "–ü—Ä–∏–≤–µ—Ç! –Ø —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ –Ω–∞ –ë–∞–ª–∏, –¥–µ–ª–∞—é —Å–≤–∞–¥–µ–±–Ω—ã–µ —Ñ–æ—Ç–æ—Å–µ—Å—Å–∏–∏. –¶–µ–Ω—ã –æ—Ç 150$. –ú–æ–≥—É –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ!",
            "expected": "photo_video"
        },
        {
            "name": "–†–∏–µ–ª—Ç–æ—Ä –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å",
            "message": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –£ –º–µ–Ω—è –µ—Å—Ç—å –≤–∏–ª–ª–∞ –Ω–∞ –∞—Ä–µ–Ω–¥—É –≤ –°–µ–º–∏–Ω—å—è–∫–µ. 4 —Å–ø–∞–ª—å–Ω–∏, –±–∞—Å—Å–µ–π–Ω, 200$ –≤ —Å—É—Ç–∫–∏.",
            "expected": "real_estate"
        },
        {
            "name": "–ú–∞—Å—Ç–µ—Ä –º–∞–Ω–∏–∫—é—Ä–∞",
            "message": "–ü—Ä–∏–≤–µ—Ç! –î–µ–ª–∞—é –º–∞–Ω–∏–∫—é—Ä –∏ –ø–µ–¥–∏–∫—é—Ä –Ω–∞ –¥–æ–º—É. –í—ã–µ–∑–¥ –ø–æ –≤—Å–µ–º—É –ë–∞–ª–∏. –¶–µ–Ω—ã –æ—Ç 40$.",
            "expected": "beauty"
        },
        {
            "name": "–ê—Ä–µ–Ω–¥–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞",
            "message": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ü—Ä–µ–¥–ª–∞–≥–∞—é –∞—Ä–µ–Ω–¥—É —Å–∫—É—Ç–µ—Ä–∞ –Ω–∞ –ë–∞–ª–∏. 8$ –≤ –¥–µ–Ω—å, —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞.",
            "expected": "transport"
        },
        {
            "name": "–¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —É—Å–ª—É–≥–∏",
            "message": "–ü—Ä–∏–≤–µ—Ç! –û—Ä–≥–∞–Ω–∏–∑—É—é —ç–∫—Å–∫—É—Ä—Å–∏–∏ –ø–æ –ë–∞–ª–∏. –ì–∏–¥ —Å –æ–ø—ã—Ç–æ–º 7 –ª–µ—Ç. 50$ –∑–∞ –¥–µ–Ω—å.",
            "expected": "tourism"
        },
        {
            "name": "–ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ",
            "message": "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?",
            "expected": "default"
        }
    ]
    
    correct_predictions = 0
    total_tests = len(test_cases)
    
    for i, test_case in enumerate(test_cases, 1):
        print(f"\nüì± –¢–ï–°–¢ {i}: {test_case['name']}")
        print("-" * 50)
        print(f"üìù –°–æ–æ–±—â–µ–Ω–∏–µ: {test_case['message']}")
        
        # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        detected_service = analyzer._detect_service_type(test_case['message'].lower())
        response = analyzer.analyze_message(test_case['message'])
        
        print(f"üéØ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Ç–∏–ø: {detected_service}")
        print(f"‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ç–∏–ø: {test_case['expected']}")
        
        if detected_service == test_case['expected']:
            print("‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û!")
            correct_predictions += 1
        else:
            print("‚ùå –û–®–ò–ë–ö–ê!")
        
        print(f"ü§ñ –û—Ç–≤–µ—Ç: {response[:100]}...")
        print("-" * 50)
    
    # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
    accuracy = (correct_predictions / total_tests) * 100
    print(f"\nüìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:")
    print(f"‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: {correct_predictions}/{total_tests}")
    print(f"üìà –¢–æ—á–Ω–æ—Å—Ç—å: {accuracy:.1f}%")
    
    if accuracy >= 80:
        print("üéâ –û–¢–õ–ò–ß–ù–û! –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!")
    elif accuracy >= 60:
        print("‚ö†Ô∏è  –•–û–†–û–®–û, –Ω–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å")
    else:
        print("‚ùå –¢–†–ï–ë–£–ï–¢–°–Ø –î–û–†–ê–ë–û–¢–ö–ê")
    
    print("\nüí° –°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –ö –ü–†–û–î–ê–ö–®–ï–ù–£!")
    print("üöÄ –£–º–Ω—ã–π –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫ –∑–∞–ø—É—â–µ–Ω –∏ –∂–¥–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π")

if __name__ == "__main__":
    test_smart_system()



