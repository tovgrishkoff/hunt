# üöó Lexus Secretary - –£–º–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –ø—Ä–æ–¥–∞–∂–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è

## ‚úÖ –°—Ç–∞—Ç—É—Å: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

Lexus Secretary —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GPT-4o-mini –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –ø—Ä–æ–¥–∞–≤–∞–µ–º–æ–º –∞–≤—Ç–æ–º–æ–±–∏–ª–µ –∏ —É–º–Ω–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –Ω–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ (@grishkoff).

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### 1. –û—Ç–≤–µ—Ç—ã —á–µ—Ä–µ–∑ GPT
- **–û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã** –æ Lexus IS 250 (–ø—Ä–æ–±–µ–≥, VIN, —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è, —Ü–µ–Ω–∞)
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∞–∑—É –∑–Ω–∞–Ω–∏–π** –æ–± –∞–≤—Ç–æ–º–æ–±–∏–ª–µ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è**: —Å–≤–æ–π—Å–∫–∏–π, –∫—Ä–∞—Ç–∫–∏–π, —É–≤–µ—Ä–µ–Ω–Ω—ã–π (–Ω–µ –º–µ–Ω–µ–¥–∂–µ—Ä –∞–≤—Ç–æ—Å–∞–ª–æ–Ω–∞)

### 2. –£–º–Ω–∞—è –ø–µ—Ä–µ—Å—ã–ª–∫–∞ –Ω–∞ @grishkoff
–ü–µ—Ä–µ–≤–æ–¥–∏—Ç –Ω–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ **–¢–û–õ–¨–ö–û** –≤ —ç—Ç–∏—Ö —Å–ª—É—á–∞—è—Ö:
- –•–æ—Ç—è—Ç –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–∞—à–∏–Ω—É ("–ì–¥–µ –≤—ã —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∞–ª—å–Ω–æ?", "–ö–æ–≥–¥–∞ –º–æ–∂–Ω–æ –≥–ª—è–Ω—É—Ç—å?")
- –ü—Ä–µ–¥–ª–∞–≥–∞—é—Ç —Å–≤–æ—é —Ü–µ–Ω—É / –¢–æ—Ä–≥—É—é—Ç—Å—è ("–ó–∞ 14 –æ—Ç–¥–∞–¥–∏—Ç–µ?", "–ö–∞–∫–æ–π –∫—Ä–∞–π —Ü–µ–Ω—ã?")
- –ü—Ä–æ—Å—è—Ç –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞

### 3. –ê–∫—Ç–∏–≤–Ω–∞—è –ø–µ—Ä–µ–ø–∏—Å–∫–∞
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –æ—Ç–≤–µ—Ç–∏–ª –ø–æ—Å–ª–µ –Ω–∞—à–µ–≥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è ‚Üí —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ—Å—ã–ª–∫–∞, –±–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤
- –ï—Å–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –ø–µ—Ä–µ–ø–∏—Å–∫–∏ ‚Üí –æ—Ç–≤–µ—á–∞–µ–º —á–µ—Ä–µ–∑ GPT

## üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `config/niches/cars.json` –≤ —Å–µ–∫—Ü–∏–∏ `secretary`:

```json
{
  "secretary": {
    "system_prompt": "...",
    "target_action": {
      "forward_to_username": "grishkoff",
      "forward_keywords": [
        "–ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å", "–ø—Ä–æ—Å–º–æ—Ç—Ä", "–≥–ª—è–Ω—É—Ç—å", "–≥–¥–µ –≤—ã", "—Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∞–ª—å–Ω–æ",
        "–∫–æ–≥–¥–∞ –º–æ–∂–Ω–æ", "–∑–∞ —Å–∫–æ–ª—å–∫–æ", "—Ç–æ—Ä–≥", "–∫—Ä–∞–π —Ü–µ–Ω—ã", "—Ç–µ–ª–µ—Ñ–æ–Ω", "–Ω–æ–º–µ—Ä", "–∑–≤–æ–Ω–æ–∫", "–ø–æ–∑–≤–æ–Ω–∏—Ç—å"
      ]
    },
    "conversation_history_limit": 10,
    "typing_delay_min": 5,
    "typing_delay_max": 15,
    "response_style": {
      "be_natural": true,
      "use_emojis": false,
      "max_length": 300,
      "min_length": 10
    }
  }
}
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

1. **lexus_secretary.py**:
   - –î–æ–±–∞–≤–ª–µ–Ω GPT Handler (`GPTHandler`)
   - –î–æ–±–∞–≤–ª–µ–Ω ConfigLoader –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ `cars.json`
   - –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏—Å—Ç–æ—Ä–∏–µ–π –ø–µ—Ä–µ–ø–∏—Å–∫–∏ (`get_conversation_history`)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –ø–µ—Ä–µ–ø–∏—Å–∫–∏ (`check_if_active_conversation`)
   - –ò–º–∏—Ç–∞—Ü–∏—è –ø–µ—á–∞—Ç–∞–Ω–∏—è (`simulate_typing`)
   - –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –Ω–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ (`should_forward_to_owner`)

2. **config/niches/cars.json**:
   - –û–±–Ω–æ–≤–ª–µ–Ω `system_prompt` —Å –¥–∞–Ω–Ω—ã–º–∏ –æ–± –∞–≤—Ç–æ–º–æ–±–∏–ª–µ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π
   - –î–æ–±–∞–≤–ª–µ–Ω—ã `forward_keywords` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ—Å—ã–ª–∫–∏

3. **docker-compose.lexus.yml**:
   - –î–æ–±–∞–≤–ª–µ–Ω –º–æ–Ω—Ç–∏–Ω–≥ `config` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
   - –î–æ–±–∞–≤–ª–µ–Ω –º–æ–Ω—Ç–∏–Ω–≥ `services/secretary/gpt_handler.py` –∏ `shared/config/loader.py`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `OPENAI_API_KEY`

## üöÄ –ó–∞–ø—É—Å–∫

```bash
# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose -f docker-compose.lexus.yml build lexus-secretary
docker-compose -f docker-compose.lexus.yml up -d lexus-secretary

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker logs -f lexus-secretary
```

## üìä –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:
```bash
docker logs lexus-secretary 2>&1 | grep -E "(LEXUS SECRETARY|GPT Handler|Initialized)"
```

–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
```
üöÄ LEXUS SECRETARY - –£–º–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –ø—Ä–æ–¥–∞–∂–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è
ü§ñ GPT Handler: ‚úÖ Enabled
‚úÖ Initialized 3 clients
```

## üìù –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã

### –ü—Ä–∏–º–µ—Ä 1: –í–æ–ø—Ä–æ—Å –æ –ø—Ä–æ–±–µ–≥–µ
**–ö–ª–∏–µ–Ω—Ç**: "–ö–∞–∫–æ–π –ø—Ä–æ–±–µ–≥?"  
**–û—Ç–≤–µ—Ç GPT**: "157 —Ç—ã—Å—è—á. –†–æ–¥–Ω–æ–π, –ª—é–±—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏."

### –ü—Ä–∏–º–µ—Ä 2: –í–æ–ø—Ä–æ—Å –æ –ø–ª–µ–Ω–∫–µ
**–ö–ª–∏–µ–Ω—Ç**: "–ö—Ä–∞—à–µ–Ω–∞?"  
**–û—Ç–≤–µ—Ç GPT**: "–û–Ω–∞ –≤ –¥–æ—Ä–æ–≥–æ–π –ø–ª–µ–Ω–∫–µ Oracal (–±–µ–ª—ã–π –ø–µ—Ä–ª–∞–º—É—Ç—Ä), –æ—Ç–¥–∞–ª–∏ 2000 –±–∞–∫—Å–æ–≤ –∑–∞ –Ω–µ–µ. –ü–æ–¥ –Ω–µ–π –≤—Å–µ –æ–∫."

### –ü—Ä–∏–º–µ—Ä 3: –ó–∞–ø—Ä–æ—Å –Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä ‚Üí –ü–µ—Ä–µ—Å—ã–ª–∫–∞
**–ö–ª–∏–µ–Ω—Ç**: "–ì–¥–µ –≤—ã —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∞–ª—å–Ω–æ? –ö–æ–≥–¥–∞ –º–æ–∂–Ω–æ –≥–ª—è–Ω—É—Ç—å?"  
**–î–µ–π—Å—Ç–≤–∏–µ**: –°–æ–æ–±—â–µ–Ω–∏–µ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ @grishkoff

### –ü—Ä–∏–º–µ—Ä 4: –¢–æ—Ä–≥ ‚Üí –ü–µ—Ä–µ—Å—ã–ª–∫–∞
**–ö–ª–∏–µ–Ω—Ç**: "–ó–∞ 14 –æ—Ç–¥–∞–¥–∏—Ç–µ?"  
**–î–µ–π—Å—Ç–≤–∏–µ**: –°–æ–æ–±—â–µ–Ω–∏–µ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ @grishkoff

## üîë –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- `OPENAI_API_KEY` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `config/niches/cars.json` –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–µ–∫—Ü–∏—é `secretary`
- –ê–∫–∫–∞—É–Ω—Ç—ã Lexus –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–∫–∞–∑–∞–Ω—ã –≤ `lexus_accounts_config.json`
